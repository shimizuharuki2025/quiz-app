# トラブルシューティングガイド

## ❗ 「サーバーとの通信に失敗しました」エラー

このエラーが表示される場合、以下を確認してください：

### 1. **必ず http://localhost:10000 からアクセス**

❌ **間違い**: ファイルを直接開いている
```
file:///C:/Users/.../public/auth/register.html
```

✅ **正しい**: サーバー経由でアクセス
```
http://localhost:10000/auth/register.html
```

**解決方法:**
1. サーバーを起動: `node server.js`
2. ブラウザで `http://localhost:10000` にアクセス
3. 自動的にログイン画面にリダイレクトされます

### 2. サーバーが起動しているか確認

ターミナルで以下のメッセージが表示されているか確認:
```
✓ セッション管理を初期化しました（有効期限: 90日・自動延長）
✓ ユーザー認証APIと学習履歴APIを初期化しました
========================================
サーバーがポート 10000 で起動しました。
========================================
```

表示されていない場合:
```bash
node server.js
```

### 3. ポート10000が使用可能か確認

別のアプリケーションがポート10000を使用している可能性があります。

**確認方法:**
```powershell
netstat -ano | findstr :10000
```

**別のポートを使用する場合:**
```bash
$env:PORT=3000; node server.js
```

その後、`http://localhost:3000` にアクセス

### 4. ブラウザのキャッシュをクリア

1. ブラウザで `Ctrl + Shift + Delete`
2. キャッシュをクリア
3. ページを再読み込み（`Ctrl + F5`）

### 5. ブラウザのコンソールでエラーを確認

1. `F12` キーを押してデベロッパーツールを開く
2. 「Console」タブを確認
3. 赤いエラーメッセージがあれば、その内容をコピー

### 6. ネットワークタブで確認

1. `F12` キーを押してデベロッパーツールを開く
2. 「Network」タブを選択
3. 登録ボタンをクリック
4. `/api/auth/register` へのリクエストを確認
5. ステータスコードと応答を確認

## 正しい起動手順

1. **ターミナルでサーバー起動:**
   ```bash
   cd C:\Users\smzha\ローソンアプリ\クイズデータローカルバックアップ場所\quiz-app-project-main_githubdata\quiz-app-project-main
   node server.js
   ```

2. **ブラウザでアクセス:**
   ```
   http://localhost:10000
   ```

3. **自動的にログイン画面へリダイレクト**

4. **「こちら」をクリックして新規登録**

5. **登録情報を入力して送信**

## よくある問題

### Q: "Cannot GET /auth/register.html" と表示される

A: サーバーが起動していないか、URLが間違っています。
- サーバーを起動してください: `node server.js`
- 正しいURL: `http://localhost:10000/auth/register.html`

### Q: 登録ボタンを押しても何も起こらない

A: JavaScriptエラーがある可能性があります。
- `F12` でコンソールを開いてエラーを確認
- ページを再読み込み（`Ctrl + F5`）

### Q: "Failed to fetch" エラー

A: サーバーが起動していないか、ポートが違います。
- サーバーが起動しているか確認
- URLが `http://localhost:10000` で始まっているか確認

### Q: サーバー起動時に "EADDRINUSE" エラー

A: ポート10000が既に使用されています。
- 古いNodeプロセスを終了: `taskkill /F /IM node.exe`
- 別のポートを使用: `$env:PORT=3000; node server.js`

## サポートが必要な場合

以下の情報を提供してください:
1. ブラウザのURLバー�表示されているURL
2. ブラウザのコンソール（F12）のエラーメッセージ
3. サーバーのターミナル出力
4. ネットワークタブのステータスコード
